<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>CIlib</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="Verifiable Computational Intelligence" /><meta name="author" content="net.cilib" /><meta name="og:image" content="/cilib/img/poster.png" /><meta name="og:title" content="CIlib" /><meta name="og:site_name" content="CIlib" /><meta name="og:url" content="http://cirg-up.github.io" /><meta name="og:type" content="website" /><meta name="og:description" content="Verifiable Computational Intelligence" /><meta name="twitter:image" content="/cilib/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/cilib/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cilib/highlight/styles/default.css" /><link rel="stylesheet" href="/cilib/css/style.css" /><link rel="stylesheet" href="/cilib/css/palette.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/cilib/" class="brand"><div class="brand-wrapper" style="background:url('/cilib/img/sidebar_brand.png') no-repeat"><span>CIlib</span></div></a></li> <li><a href="/cilib/docs/index.html" class="">Getting Started</a></li> <li><a href="/cilib/docs/design/index.html" class="">Design</a> <ul class="sub_section"> <li><a href="/cilib/docs/design/rvar.html" class="">RVar</a></li> <li><a href="/cilib/docs/design/position.html" class="">Position</a></li> <li><a href="/cilib/docs/design/lenses.html" class="">Lenses</a></li> <li><a href="/cilib/docs/design/entity.html" class="">Entity</a></li> <li><a href="/cilib/docs/design/step.html" class="">Step & Iteration</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="hidden-xs"><a href="https://github.com/cirg-up/cilib"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li class="hidden-xs"><a href="https://github.com/cirg-up/cilib"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('CIlib Verifiable Computational Intelligence');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('CIlib Verifiable Computational Intelligence');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="cirg-up" data-github-repo="cilib"><div class="content-wrapper"><section><h1 id="step">Step</h1>

<p>Apart from tracking the effect of randomness, a computational intelligence
algorithm requires some additional information:</p>

<ul>
  <li>The optimization scheme (<code class="highlighter-rouge">Opt</code>) required, either minimization or maximization</li>
  <li>The fitness function evaluation instance, <code class="highlighter-rouge">Eval</code>, which calculates the quality of
the candidate solution</li>
</ul>

<p>The result is a function, which uses a predefined set of values to generate
a <code class="highlighter-rouge">RVar</code> computation to which randomness still needs to be applied. The function
is therefore of the shape</p>

<div class="highlighter-rouge"><pre class="highlight"><code>(Opt,Eval[A]) =&gt; RVar[B]
</code></pre>
</div>

<p>The predefined set of values required for input is also referred to as the
“environment”. Given that the environment is decided once, at the beginning of
the execution process, we can factor out this common parameter using a Kleisli
arrow, on this case the <code class="highlighter-rouge">ReaderT</code> monad transformer is applicable, resulting
in the final type of:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ReaderT[RVar, (Opt,Eval[A]), B]
</code></pre>
</div>

<p>Because monad transformers are monads themselves, we can freely compose different
<code class="highlighter-rouge">Step</code> instances to create a larger computation. The larger computation, being
termed the “algorithm”. Due to the sequencing action of monads, <code class="highlighter-rouge">Step</code> instances
are analogous to steps in algorithm pseudo-code.</p>

<p>Now that the intention of <code class="highlighter-rouge">Step</code> is clearer, lets have a look at some usage. Keep
in mind that even though the final “shape” of the <code class="highlighter-rouge">Step</code> is defined, this does not
limit the manner in which we can create <code class="highlighter-rouge">Step</code> instances.
Within a PSO, each particle has several actions applied to it, in order to create
a new particle that occupies a different location within the problem search space.</p>

<p>The canonical PSO algorithm iteratively alters the position (and state data) of each
particle to create a new particle for each within the collection. The new collection
essentially replaces the original collection and this process repeats until some
kind of stopping condition is met. Stopping condition logic is intentionally not
included within the <code class="highlighter-rouge">Step</code>. The type for a PSO is then</p>

<div class="highlighter-rouge"><pre class="highlight"><code>List[Particle[S,A]] =&gt; Particle[S,A] =&gt; Step[RVar,(Opt,Eval[A]),Particle[A]]
</code></pre>
</div>

<p>and the algorithm definition is:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">pso</span><span class="o">[</span><span class="kt">S</span><span class="o">](</span><span class="n">w</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">c1</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">c2</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span>
     <span class="o">|</span>   <span class="n">cognitive</span><span class="k">:</span> <span class="kt">Guide</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">],</span> <span class="n">social</span><span class="k">:</span> <span class="kt">Guide</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]</span>
     <span class="o">|</span> <span class="o">)(</span><span class="k">implicit</span> <span class="n">M</span><span class="k">:</span> <span class="kt">HasMemory</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">],</span> <span class="n">V</span><span class="k">:</span> <span class="kt">HasVelocity</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]</span>
     <span class="o">|</span> <span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]]</span> <span class="k">=&gt;</span> <span class="nc">Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="nc">Step</span><span class="o">[</span><span class="kt">Double</span>,<span class="kt">Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]]</span>  <span class="k">=</span>
     <span class="o">|</span>   <span class="n">collection</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="k">=&gt;</span> <span class="k">for</span> <span class="o">{</span>
     <span class="o">|</span>     <span class="n">cog</span>     <span class="k">&lt;-</span> <span class="n">cognitive</span><span class="o">(</span><span class="n">collection</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">soc</span>     <span class="k">&lt;-</span> <span class="n">social</span><span class="o">(</span><span class="n">collection</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">vel</span>     <span class="k">&lt;-</span> <span class="n">stdVelocity</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">soc</span><span class="o">,</span> <span class="n">cog</span><span class="o">,</span> <span class="n">w</span><span class="o">,</span> <span class="n">c1</span><span class="o">,</span> <span class="n">c2</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">p</span>       <span class="k">&lt;-</span> <span class="n">stdPosition</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">vel</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">p2</span>      <span class="k">&lt;-</span> <span class="n">evalParticle</span><span class="o">(</span><span class="n">p</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">p3</span>      <span class="k">&lt;-</span> <span class="n">updateVelocity</span><span class="o">(</span><span class="n">p2</span><span class="o">,</span> <span class="n">vel</span><span class="o">)</span>
     <span class="o">|</span>     <span class="n">updated</span> <span class="k">&lt;-</span> <span class="n">updatePBest</span><span class="o">(</span><span class="n">p3</span><span class="o">)</span>
     <span class="o">|</span>   <span class="o">}</span> <span class="k">yield</span> <span class="n">updated</span>
<span class="n">pso</span><span class="k">:</span> <span class="err">[</span><span class="kt">S</span><span class="err">]</span><span class="o">(</span><span class="kt">w:</span> <span class="kt">Double</span><span class="o">,</span> <span class="kt">c1:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">c2</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">cognitive</span><span class="k">:</span> <span class="kt">cilib.pso.Guide</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">],</span> <span class="n">social</span><span class="k">:</span> <span class="kt">cilib.pso.Guide</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">])(</span><span class="k">implicit</span> <span class="n">M</span><span class="k">:</span> <span class="kt">cilib.HasMemory</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">],</span> <span class="k">implicit</span> <span class="n">V</span><span class="k">:</span> <span class="kt">cilib.HasVelocity</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">])</span><span class="nc">List</span><span class="o">[</span><span class="kt">cilib.pso.Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]]</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">cilib</span><span class="o">.</span><span class="n">pso</span><span class="o">.</span><span class="nc">Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]</span> <span class="k">=&gt;</span> <span class="n">cilib</span><span class="o">.</span><span class="nc">Step</span><span class="o">[</span><span class="kt">Double</span>,<span class="kt">cilib.pso.Particle</span><span class="o">[</span><span class="kt">S</span>,<span class="kt">Double</span><span class="o">]])</span>
</code></pre>
</div>

<p>That sure looks complex! Sure, there are a few things going on there, but it certainly
is not complex - the syntax just makes the intention a little hidden due to the verbosity.
The <code class="highlighter-rouge">pso</code> function defines that there are some parameters that it requires
for the <code class="highlighter-rouge">stdVelocity</code> function, namely <code class="highlighter-rouge">w</code>, <code class="highlighter-rouge">c1</code>, <code class="highlighter-rouge">c2</code>. Next it requires two individual
<code class="highlighter-rouge">Guide</code> instances which are the particle attactors for the velocity update equation. In
the next parameter group is an implicit parameter that is constraining the types of
data elements <code class="highlighter-rouge">pso</code> can work with. In this case, the <code class="highlighter-rouge">pso</code> requires that all <code class="highlighter-rouge">Particle</code>
instances (which is just an alias for the type <code class="highlighter-rouge">Entity[S,Position[Double]]</code>)
must have a <code class="highlighter-rouge">HasMemory</code> and <code class="highlighter-rouge">HasVelocity</code> instance available for the compiler to provide.
As mentioned previously, in the section about lenses and optics, these classy lens instances
prevent <code class="highlighter-rouge">Entity</code> types that do not have a memory nor a velocity present in their
state parameter type. Again, we don’t know what the value of <code class="highlighter-rouge">S</code> is at the definition
level, it will be made concrete when we actually use the <code class="highlighter-rouge">pso</code> function.</p>

<p>Every function within the for-comprehension is a function that yields a <code class="highlighter-rouge">Step</code> instance
of the type <code class="highlighter-rouge">Step[Double,Particle[S,Double]]</code> (in this usage example). The individual
<code class="highlighter-rouge">Step</code>s are then composed into a larger composition that ultimately results in the
creation of a new piece of data: the particle which replaces the particle identified
by the parameter <code class="highlighter-rouge">x</code>.</p>

<h1 id="iteration">Iteration</h1>

<p>Algorithms can be executed either synchronously or asynchronously. Given an
algorithm definition like the definition of <code class="highlighter-rouge">pso</code> above, it may be passed into
an iteration function which converts the signature of <code class="highlighter-rouge">pso</code> function into the
shape:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>List[Particle[S,A]] =&gt; RVar[A,Particle[S,A]]
</code></pre>
</div>

<p>It is important to note that the manner of execution constrains the amount
of parallelism that may be applied to the iteration process. The synchronous
scheme can be completely parallelized as there is no reliance on the currently
building collection. The asynchronous process on the other hand builds the new
collection from a combination of the current and new collections. As a result
of the manner in which the asynchronous process executes, parallelism is not
possible due to the shared state that is managed during the execution process.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/cilib/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/cilib/js/main.js"></script></body></html>